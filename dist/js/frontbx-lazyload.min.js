!function(){window.LAZY_FALLBACK_IMAGE||(window.LAZY_FALLBACK_IMAGE="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzMiAzMiIgd2lkdGg9IjMyIiBoZWlnaHQ9IjMyIiBmaWxsPSJ3aGl0ZSI+CiAgPHBhdGggZD0iTTAgNCBMMCAyOCBMMzIgMjggTDMyIDQgeiBNNCAyNCBMMTAgMTAgTDE1IDE4IEwxOCAxNCBMMjQgMjR6IE0yNSA3IEE0IDQgMCAwIDEgMjUgMTUgQTQgNCAwIDAgMSAyNSA3Ij48L3BhdGg+Cjwvc3ZnPg==");var t=function(t){return this.running=0,this.concurrency=t,this.taskQueue=[],this};t.prototype.add=function(t){this.running<this.concurrency?this._runTask(t):this._enqueueTask(t)},t.prototype.next=function(){this.running--,this.taskQueue.length>0&&this._runTask(this.taskQueue.shift())},t.prototype._runTask=function(t){this.running++,t(this)},t.prototype._enqueueTask=function(t){this.taskQueue.push(t)};const n=function(){return this._DOMElements=[],this.construct(document),this};n.prototype.construct=function(n){this._queue=new t(15);let e=Array.prototype.slice.call(n.querySelectorAll(".js-lazyload"));if(e.length>=1){for(var o=0;o<e.length;o++)this.bind(e[o]);this._DOMElements=[...this._DOMElements,...e]}},n.prototype.destruct=function(t){if(!t||t===document)return void(this._DOMElements=[]);const[n,e]=frontbx.import(["each","closest"]).from("_");n(this._DOMElements,(function(n,o){e(o,t)&&this._DOMElements.splice(n,1)}),this)},n.prototype.bind=function(t){var n=this._getSrc(t);this._canLoad(t)&&this._loadImage(t,n,this._isImage(t))},n.prototype._loadImage=function(t,n,e){e&&t.src===n?this._markLoaded(t):this._queue.add(this._getLoadFunc(t,n,e))},n.prototype._getLoadFunc=function(t,n,e){const o=this;let i=window.LAZY_FALLBACK_IMAGE;return function(s){var a=new Image;a.onload=function(){e?t.src=n:t.style.backgroundImage="url("+n+")",o._markLoaded(t),a.onload={},a.onerror={},s.next()},a.onerror=function(){e?t.src=i:t.style.backgroundImage=`url("${i}")`,o._markFailed(t),s.next(),a.onload={},a.onerror={}},a.classList.add("lazy-loading"),a.src=n}},n.prototype._markFailed=function(t){t.classList.add("failed"),this._markLoaded(t)},n.prototype._markLoaded=function(t){t.classList.add("lazy-loaded"),t.classList.remove("lazy-loading")},n.prototype._getSrc=function(t){return t.getAttribute("data-src")||t.dataset.src},n.prototype._canLoad=function(t){return!(void 0===this._getSrc(t)||t.classList.contains("lazy-loading")&&t.classList.contains("lazy-loaded"))},n.prototype._isImage=function(t){return"img"===t.nodeName.toLowerCase()},window.frontbx||window.addEventListener("DOMContentLoaded",(()=>{const t=new n;frontbx.dom().register("LazyLoad",t,!1)}))}();
//# sourceMappingURL=frontbx-lazyload.min.js.map