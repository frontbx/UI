!function(){var t="undefined"==typeof FBX_ROOT?"object"==typeof process&&"object"==typeof global?global:window:FBX_ROOT;t.LAZY_FALLBACK_IMAGE||(t.LAZY_FALLBACK_IMAGE="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzMiAzMiIgd2lkdGg9IjMyIiBoZWlnaHQ9IjMyIiBmaWxsPSJ3aGl0ZSI+CiAgPHBhdGggZD0iTTAgNCBMMCAyOCBMMzIgMjggTDMyIDQgeiBNNCAyNCBMMTAgMTAgTDE1IDE4IEwxOCAxNCBMMjQgMjR6IE0yNSA3IEE0IDQgMCAwIDEgMjUgMTUgQTQgNCAwIDAgMSAyNSA3Ij48L3BhdGg+Cjwvc3ZnPg==");var e=function(t){return this.running=0,this.concurrency=t,this.taskQueue=[],this};e.prototype.add=function(t){this.running<this.concurrency?this._runTask(t):this._enqueueTask(t)},e.prototype.next=function(){this.running--,this.taskQueue.length>0&&this._runTask(this.taskQueue.shift())},e.prototype._runTask=function(t){this.running++,t(this)},e.prototype._enqueueTask=function(t){this.taskQueue.push(t)};const n=function(){return this._DOMElements=[],this.construct(document),this};n.prototype.construct=function(t){this._queue=new e(15);let n=Array.prototype.slice.call(t.querySelectorAll(".js-lazyload"));if(n.length>=1){for(var o=0;o<n.length;o++)this.bind(n[o]);this._DOMElements=[...this._DOMElements,...n]}},n.prototype.destruct=function(t){if(!t||t===document)return void(this._DOMElements=[]);const[e,n]=frontbx.import(["each","closest"]).from("_");e(this._DOMElements,(function(e,o){n(o,t)&&this._DOMElements.splice(e,1)}),this)},n.prototype.bind=function(t){var e=this._getSrc(t);this._canLoad(t)&&this._loadImage(t,e,this._isImage(t))},n.prototype._loadImage=function(t,e,n){n&&t.src===e?this._markLoaded(t):this._queue.add(this._getLoadFunc(t,e,n))},n.prototype._getLoadFunc=function(t,e,n){const o=this;let i=LAZY_FALLBACK_IMAGE;return function(s){var a=new Image;a.onload=function(){n?t.src=e:t.style.backgroundImage="url("+e+")",o._markLoaded(t),a.onload={},a.onerror={},s.next()},a.onerror=function(){n?t.src=i:t.style.backgroundImage=`url("${i}")`,o._markFailed(t),s.next(),a.onload={},a.onerror={}},a.classList.add("lazy-loading"),a.src=e}},n.prototype._markFailed=function(t){t.classList.add("failed"),this._markLoaded(t)},n.prototype._markLoaded=function(t){t.classList.add("lazy-loaded"),t.classList.remove("lazy-loading")},n.prototype._getSrc=function(t){return t.getAttribute("data-src")||t.dataset.src},n.prototype._canLoad=function(t){return!(void 0===this._getSrc(t)||t.classList.contains("lazy-loading")&&t.classList.contains("lazy-loaded"))},n.prototype._isImage=function(t){return"img"===t.nodeName.toLowerCase()},t.frontbx||window.addEventListener("DOMContentLoaded",(()=>{const t=new n;frontbx.dom().register("LazyLoad",t,!1)}))}();
//# sourceMappingURL=frontbx-lazyload.min.js.map