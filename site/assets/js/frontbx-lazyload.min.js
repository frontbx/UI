!function(){var t=void 0===t?"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzMiAzMiIgd2lkdGg9IjMyIiBoZWlnaHQ9IjMyIiBmaWxsPSJ3aGl0ZSI+CiAgPHBhdGggZD0iTTAgNCBMMCAyOCBMMzIgMjggTDMyIDQgeiBNNCAyNCBMMTAgMTAgTDE1IDE4IEwxOCAxNCBMMjQgMjR6IE0yNSA3IEE0IDQgMCAwIDEgMjUgMTUgQTQgNCAwIDAgMSAyNSA3Ij48L3BhdGg+Cjwvc3ZnPg==":t,n=function(t){return this.running=0,this.concurrency=t,this.taskQueue=[],this};n.prototype.add=function(t){this.running<this.concurrency?this._runTask(t):this._enqueueTask(t)},n.prototype.next=function(){this.running--,this.taskQueue.length>0&&this._runTask(this.taskQueue.shift())},n.prototype._runTask=function(t){this.running++,t(this)},n.prototype._enqueueTask=function(t){this.taskQueue.push(t)};const e=function(){return this._DOMElements=[],this.construct(document),this};e.prototype.construct=function(t){this._queue=new n(15);let e=Array.prototype.slice.call(t.querySelectorAll(".js-lazyload"));if(e.length>=1){for(var o=0;o<e.length;o++)this.bind(e[o]);this._DOMElements=[...this._DOMElements,...e]}},e.prototype.destruct=function(t){if(!t||t===document)return void(this._DOMElements=[]);const[n,e]=FrontBx.import(["each","closest"]).from("_");n(this._DOMElements,(function(n,o){e(o,t)&&this._DOMElements.splice(n,1)}),this)},e.prototype.bind=function(t){var n=this._getSrc(t);this._canLoad(t)&&this._loadImage(t,n,this._isImage(t))},e.prototype._loadImage=function(t,n,e){e&&t.src===n?this._markLoaded(t):this._queue.add(this._getLoadFunc(t,n,e))},e.prototype._getLoadFunc=function(n,e,o){const i=this;return function(s){var a=new Image;a.onload=function(){o?n.src=e:n.style.backgroundImage="url("+e+")",i._markLoaded(n),a.onload={},a.onerror={},s.next()},a.onerror=function(){o?n.src=t:n.style.backgroundImage="url("+t+")",i._markFailed(n),s.next(),a.onload={},a.onerror={}},a.classList.add("lazy-loading"),a.src=e}},e.prototype._markFailed=function(t){t.classList.add("failed"),this._markLoaded(t)},e.prototype._markLoaded=function(t){t.classList.add("lazy-loaded"),t.classList.remove("lazy-loading")},e.prototype._getSrc=function(t){return t.getAttribute("data-src")||t.dataset.src},e.prototype._canLoad=function(t){return!(void 0===this._getSrc(t)||t.classList.contains("lazy-loading")&&t.classList.contains("lazy-loaded"))},e.prototype._isImage=function(t){return"img"===t.nodeName.toLowerCase()},window.FrontBx||window.addEventListener("DOMContentLoaded",(()=>{const t=new e;FrontBx.dom().register("LazyLoad",t,!1)}))}();
//# sourceMappingURL=frontbx-lazyload.min.js.map